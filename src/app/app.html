<!DOCTYPE html>

<html lang="es">

<head>
    <!-- Default character set -->
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, shrink-to-fit=no">
    <!-- Internet Explorer Compatibility Layer enabled -->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!-- Stylesheet and favicon -->
    <link rel="icon" type="image/x-icon" href="../../img/favicon.ico">
    <link rel="stylesheet" href="css/common_style.css">
    <link rel="stylesheet" href="css/app_style.css">
    <!-- Google Fonts - Roboto -->
    <link href="https://fonts.googleapis.com/css?family=Roboto&display=swap" rel="stylesheet">
    <title>e-Horta</title>
    <script src="js/restringir_acceso.js"></script>
    <script src="js/delete_sesion.js"></script>
    <!-- Chart.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.9.3/Chart.bundle.min.js"></script>
</head>

<body class="main" style="display: none;">
    <!-- Top bar (navigation menu) -->
    <header>
        <!-- Corporative brand -->
        <a id="logo" class="white-filter" href="../index.html">
            <img src="img/logo_v2.svg" alt="LOGO">
        </a>

        <nav class="navbar">
            <!-- Navigation menu -->
            <ul class="navbar-links">
                <li>
                    <a href="weather.html">El Tiempo</a>
                </li>
                <li>
                    <a href="notifications.html">Notificaciones</a>
                </li>
                <li>
                    <a href="app.html">Gráficas</a>
                    <div id="current-page"></div>
                </li>
                <li>
                    <a onclick="delete_sesion()" href="#">Cerrar sesión</a>
                </li>
            </ul>
            <div class="navbar-right">
                <!-- Mobile menu icon -->
                <div class="menu-icon" id="menu-toggle">
                    <div class="line-top"></div>
                    <div class="line-mid"></div>
                    <div class="line-bot"></div>
                </div>
            </div>
        </nav>
    </header>

    <div id="map-table">
        <div id="tab-head-user">
            <div id="username">
               <!-- user será el nombre del usuario de la sesion -->
                <h2>Bienvenido [user]</h2>
                
            </div>
            <select id="select-css" onchange="location = 'javascript:centerPlot('+this.value+')'">

                <option selected="#" disable selected hidden>Seleccione parcela...</option>

            </select>
            <!-- EMPIEZA POP UP AÑADIR PARCELA -->

            <div class="form-popup" id="my-form" style="border-radius: 15px;margin-left: 10px;">
                <form action="/action_page.php" class="form-container">
                    <div>
                        <a href='javascript:closeForm()' id="button_close_pop" style="display: flex;align-content: flex-end;"><img src="img/close.png" alt="Cerrar"></a>
                    </div>
                    <label for="name"><b>Nombre</b></label>
                    <input type="text" placeholder="Nombre parcela" name="name">

                    <label for="coordenada-X"><b>Coordenada-X</b></label>
                    <input type="text" placeholder="Coordenada-X" name="coordenada-X">

                    <label for="coordenada-Y"><b>Coordenada-Y</b></label>
                    <input type="text" placeholder="Coordenada-Y" name="coordenada-Y">

                    <button type="submit" class="btn">Aplicar</button>
                    <!--button type="button" class="btn cancel" onclick="closeForm()">Close</button-->
                </form>
            </div>

            <!-- Acaba POP UP  -->

            <div id="tab">
                <table class="user-table">

                    <thead>
                        <tr>
                            <!-- <th scope="col">rewrt</th>*/-->
                            <!---especifica que son columnas--->
                        </tr>
                    </thead>
                    <tbody id="fields">

                    </tbody>
                </table>
            </div>
        </div>

        <script src="js/plots_list.js"></script>
        <script>
            // "text" es la id del objeto donde se muestran los datos
            ViewPlotsList.prepare("fields", "select-css");
            // Se inicializa el controlador
            PlotsController.init();
        </script>


        <section id="map">
            <script src="js/map.js"></script>
            <script src="js/delete.js"></script>
            <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCIAkvbXtoyr0W_VfFkc9OH4MjBvYNcwy4&callback=initMap" async defer>
            </script>
        </section>

    </div>

    <!------------------------>
    <!------------------------>
    <div id="app">
       <section  id="open-map" >
        <!-- Boton para abrir el mapa -->
            <button onclick="openMap()"><img src="img/mapa.svg" alt="icono mapa"><span>Volver al mapa</span></button>
            
       </section>
        <!-- Selectores de fechas móvil-->
        <section id="dates-mobile">
            <input id='start-date' placeholder="Fecha inicio" type="text" onfocus="(this.type='date')">
            <div class="bar"></div>
            <input id='end-date' placeholder="Fecha final" class="textbox-n" type="text" onfocus="(this.type='date')">
            
        </section>
        <script src="js/date_selector.js"></script>
        <!--aqui se pone el id de la posicion seleccionada para recogerlo desde graphic_data.js-->
        <div id="position-number">
            <span>Sonda: </span>
            <span id="selected-probe"></span>
        </div>

        <!-- Gráfica -->
        <div class="chart-container">
            <canvas id="chart"></canvas>
        </div>
        
        <section id="desktop-controls">
        <!-- Selectores de fechas desktop-->
            <div id="dates">
                <input id='start-date' placeholder="Fecha inicio" type="text" onfocus="(this.type='date')">
                <div class="bar"></div>
                <input id='end-date' placeholder="Fecha final" class="textbox-n" type="text" onfocus="(this.type='date')">
            </div>
            
            <!-- Botones movil -->
            <div id="measurements">
                <button id="desktop-btn-hum" class="measure-btn-active" onclick="activateDesktopButton(this)"><img src="img/datalogger/humidity.svg" alt="botón humedad">Humedad</button>
                <button id="desktop-btn-tem" class="measure-btn" onclick="activateDesktopButton(this)"><img src="img/datalogger/temperature.svg" alt="botón temperatura">Temperatura</button>
                <button id="desktop-btn-lum" class="measure-btn" onclick="activateDesktopButton(this)"><img src="img/datalogger/luminosity.svg" alt="botón luminosidad">Luminosidad</button>
                <button id="desktop-btn-rai" class="measure-btn" onclick="activateDesktopButton(this)"><img src="img/datalogger/rainfall.svg" alt="botón lluvia">Precipitación</button>
                <button id="desktop-btn-sal" class="measure-btn" onclick="activateDesktopButton(this)"><img src="img/datalogger/salinity.svg" alt="botón salinidad">Salinidad</button>
            </div>
        </section>
            
        <!-- Botones movil -->
        <div id="measurements-mobile">
            <button id="mobile-btn-hum" class="measure-btn-active" onclick="activateMobileButton(this)"><img src="img/datalogger/humidity.svg" alt="botón humedad"></button>
            <button id="mobile-btn-tem" class="measure-btn" onclick="activateMobileButton(this)"><img src="img/datalogger/temperature.svg" alt="botón temperatura"></button>
            <button id="mobile-btn-lum" class="measure-btn" onclick="activateMobileButton(this)"><img src="img/datalogger/luminosity.svg" alt="botón luminosidad"></button>
            <button id="mobile-btn-rai" class="measure-btn" onclick="activateMobileButton(this)"><img src="img/datalogger/rainfall.svg" alt="botón lluvia"></button>
            <button id="mobile-btn-sal" class="measure-btn" onclick="activateMobileButton(this)"><img src="img/datalogger/salinity.svg" alt="botón salinidad"></button>
        </div>
        
    </div>
    <!-- Scripts -->
    <script src="js/navbar.js"></script>
    <script src="js/pop-manager.js"></script>
    <script src="js/delete.js"></script>
    <script src="js/checkbox_list.js"></script>
</body>

</html>
